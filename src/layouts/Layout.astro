---
/*
  Layout.astro
  -------------
  Minimal layout that:
  - imports global styles
  - defines a centered navigation bar
  - exposes <slot /> for page content
*/

import "../styles/global.css";

const { title = "My website", description = "Portfolio & blog", lang = "fr" } = Astro.props;

// Navigation links
const nav = [
  { href: "/", label: "Home" },
  { href: "/cv", label: "CV" },
  { href: "/blog", label: "Blog" },
  { href: "/projects", label: "Projects" },
  { href: "/interesting", label: "Interesting" },
];

// Active link detection
const currentPath = Astro.url.pathname;
const isActive = (href: string) =>
  currentPath === href || (href !== "/" && currentPath.startsWith(href + "/"));
---

<!DOCTYPE html>
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="theme-color" content="#243553" />
    <link rel="icon" href="/favicon.ico" />

    <!-- Google Fonts: Bricolage Grotesque -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@300..800&display=swap"
      rel="stylesheet"
    />

    <!-- Basic Open Graph metadata (adjust as needed) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content="/og-default.jpg" />
  </head>

  <body>
    <header class="site-header">
      <nav class="nav" aria-label="Main navigation">
        {nav.map((link) => (
          <a href={link.href} aria-current={isActive(link.href) ? "page" : undefined}>
            {link.label}
          </a>
        ))}
      </nav>
    </header>

    <main>
      <slot />
    </main>

    <!-- ===============================
         Footer: 3-column responsive layout
    =================================-->
    <footer>
      <div class="footer-grid">
        <!-- Left: copyright -->
        <div class="footer-left">
          © {new Date().getFullYear()} • Loïc Marigny
        </div>

        <!-- Center: social icons -->
        <nav class="footer-center socials" aria-label="Social links">
          <a href="https://instagram.com/loic_marigny" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <img src="https://cdn.simpleicons.org/instagram/FFFFFF" alt="Instagram" loading="lazy" />
            <span class="visually-hidden">Instagram</span>
          </a>
          <a href="https://x.com/LoicMarigny" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <img src="https://cdn.simpleicons.org/x/FFFFFF" alt="X (Twitter)" loading="lazy" />
            <span class="visually-hidden">X (Twitter)</span>
          </a>
          <a href="https://www.linkedin.com/in/loic-marigny" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
            <img src="/icons/linkedin-logo.svg" alt="LinkedIn" loading="lazy" />
            <span class="visually-hidden">LinkedIn</span>
          </a>
          <a href="https://github.com/loic-marigny" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <img src="https://cdn.simpleicons.org/github/FFFFFF" alt="GitHub" loading="lazy" />
            <span class="visually-hidden">GitHub</span>
          </a>
          <a href="https://www.goodreads.com/user/show/178085152" target="_blank" rel="noopener noreferrer" aria-label="Goodreads">
            <img src="https://cdn.simpleicons.org/goodreads/FFFFFF" alt="Goodreads" loading="lazy" />
            <span class="visually-hidden">Goodreads</span>
          </a>
          <a href="https://boxd.it/8s2yN" target="_blank" rel="noopener noreferrer" aria-label="Letterboxd">
            <img src="https://cdn.simpleicons.org/letterboxd/FFFFFF" alt="Letterboxd" loading="lazy" />
            <span class="visually-hidden">Letterboxd</span>
          </a>
        </nav>

        <!-- Right: secondary links (change as you like) -->
        <div class="footer-right" aria-label="Secondary footer links">
          <a class="footer-link" href="/about">About</a>
          <a class="footer-link" href="/contact">Contact</a>
          <!-- or /legal, /rss.xml, etc. -->
        </div>
      </div>
    </footer>
  </body>
</html>
